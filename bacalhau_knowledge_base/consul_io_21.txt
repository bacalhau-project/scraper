URL: https://www.consul.io/docs/connect/observability

HashiDaysOne conference. Three cities.Find a city near youDismiss alertHashiCorp DeveloperHashiCorp Cloud PlatformTerraformPackerConsulVaultBoundaryNomadWaypointVagrantConsulInstallTutorialsDocumentationAPICLITry Cloud(opens in new tab)SearchCommand or control keyK keySign inSign upThemeConsul HomeDocumentationDocumentationWhat is Consul?Why Choose Consul?Core ConceptsGet StartedArchitectureRelease NotesUpgradeServicesService MeshOverviewHow Service Mesh WorksConfigurationConfiguration entriesProxiesService intentionsObservabilityOverviewAccess LogsMonitor service-to-service communicationUI VisualizationManage trafficConnectivity TasksDistributed TracingGatewaysCluster PeeringNomadKubernetesNative App IntegrationCertificate ManagementDevelop and DebugConsul DataplaneDynamic App ConfigurationSecurityAgentIntegrationsTroubleshootKubernetesNomadAWS ECSAWS LambdaHCP Consul DedicatedConsul EnterpriseNetwork Infrastructure AutomationResourcesTutorial LibraryCertificationsCommunity Forum(opens in new tab)Support(opens in new tab)GitHub(opens in new tab)DeveloperConsulDocumentationService MeshObservabilityv1.19.x (latest)Consulv1.18.xv1.17.xv1.16.xv1.15.xv1.14.xv1.13.xv1.12.xv1.11.xv1.10.xv1.9.xv1.8.xService Mesh Observability OverviewIn order to take advantage of the service mesh's L7 observability features you will need
to:Deploy sidecar proxies that are capable of emitting metrics with each of your
services. We have first class support for Envoy.Define where your proxies should send metrics that they collect.Define the protocols for each of your services.Define the upstreams for each of your services.If you are using Envoy as your sidecar proxy, you will need toenable
gRPCon your client agents. To define the
metrics destination and service protocol you may want to enableconfiguration
entriesandcentralized service
configuration.KubernetesIf you are using Kubernetes, the Helm chart can simplify much of the configuration needed to enable observability. See
ourKubernetes observability docsfor more information.Metrics destinationFor Envoy the metrics destination can be configured in the proxy configuration
entry'sconfigsection.kind = "proxy-defaults"name = "global"config {"envoy_dogstatsd_url": "udp://127.0.0.1:9125"}Find other possible metrics syncs in theEnvoy documentation.Service protocolYou can specify theprotocolfor all service instances in theservice-defaultsconfiguration entry. You can also override the default protocol when defining and registering proxies in a service definition file. Refer toExpose Paths Configuration Referencefor additional information.By default, proxies only provide L4 metrics.
Defining the protocol allows proxies to handle requests at the L7
protocol and emit L7 metrics. It also allows proxies to make per-request
load balancing and routing decisions.Service upstreamsYou can set the upstream for each service using the proxy'supstreamssidecar parameter, which can be defined in a service'ssidecar registration.Edit this page on GitHubThemeCertificationsSystem StatusCookie ManagerTerms of UseSecurityPrivacyTrademark PolicyTrade ControlsAccessibilityGive Feedback(opens in new tab)