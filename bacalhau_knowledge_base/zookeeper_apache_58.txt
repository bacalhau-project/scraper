URL: https://zookeeper.apache.org/doc/r3.4.3/releasenotes.html

Apache>ZooKeeper>ZooKeeperProjectWikiZooKeeper 3.4 DocumentationOverviewWelcomeOverviewGetting StartedRelease NotesDeveloperAPI DocsProgrammer's GuideJava ExampleBarrier and Queue TutorialRecipesBookKeeperGetting startedOverviewSetup guideProgrammer's guideAdmin & OpsAdministrator's GuideQuota GuideJMXObservers GuideContributorZooKeeper InternalsMiscellaneousWikiFAQMailing ListsPDFZooKeeper 3.4.3 Release NotesChanges Since ZooKeeper 3.4.2Changes Since ZooKeeper 3.4.1Changes Since ZooKeeper 3.4.0Changes Since ZooKeeper 3.3.0These release notes include new developer and user facing incompatibilities, features, and major improvements.ChangesChanges Since ZooKeeper 3.4.2Changes Since ZooKeeper 3.4.2Changes Since ZooKeeper 3.4.2IssueNotesZOOKEEPER-1089zkServer.sh status does not work due to invalid option of nc.ZOOKEEPER-1345Add a .gitignore file with general exclusions and Eclipse project files excluded.ZOOKEEPER-1343getEpochToPropose should check if lastAcceptedEpoch is greater or equal than epoch.ZOOKEEPER-850replaces log4j with slf4j code (also in contrib for bookkeeper, zooinspector,
 rest,loggraph), added slf4j dependencies into several ivy.xml files. 
 You must add slf4j-api-1.6.1.jar and slf4j-log4j12-1.6.1.jar (bridge from sl4j 
 to log4j) to the classpath, if not using the standard scripts.
 log4j remains as the final logger yet, there is still work to do:
 remove programmatic access to the log4j api from certain classes
  (which add appenders or configure log4j at runtime), or move them to contribZOOKEEPER-1358In StaticHostProviderTest.java, testNextDoesNotSleepForZero tests that hostProvider.next(0)
  doesn't sleep by checking that the latency of this call is less than 10secZOOKEEPER-1351Invalid test verification in MultiTransactionTest.ZOOKEEPER-973bind() could fail on Leader because it does not setReuseAddress on its ServerSocket.ZOOKEEPER-1367Data inconsistencies and unexpired ephemeral nodes after cluster restart.ZOOKEEPER-1353C client test suite fails consistently.ZOOKEEPER-1373Hardcoded SASL login context name clashes with Hadoop security
  configuration override.ZOOKEEPER-1352server.InvalidSnapshotTest is using connection timeouts that
  are too short.ZOOKEEPER-1336javadoc for multi is confusing, references functionality that doesn't
  seem to exisZOOKEEPER-1340multi problem - typical user operations are
  generating ERROR level messages in the server.ZOOKEEPER-1374C client multi-threaded test suite fails to  compile on ARM architectures.ZOOKEEPER-1337multi's "Transaction" class is missing tests.ZOOKEEPER-1338class cast exceptions may be thrown by multi  ErrorResult class (invalid equals)ZOOKEEPER-1322Cleanup/fix logging in Quorum code.ZOOKEEPER-1327There are still remnants of hadoop urls.Changes Since ZooKeeper 3.4.1Changes Since ZooKeeper 3.4.1Changes Since ZooKeeper 3.4.1IssueNotesZOOKEEPER-1333NPE in FileTxnSnapLog when restarting a cluster.ZOOKEEPER-1323c client doesn't compile on freebsdChanges Since ZooKeeper 3.4.0Changes Since ZooKeeper 3.4.0Changes Since ZooKeeper 3.4.0IssueNotesZOOKEEPER-1311ZooKeeper test jar is brokenZOOKEEPER-1305zookeeper.c:prepend_string func can dereference null ptrZOOKEEPER-1316zookeeper_init leaks memory if chroot is just '/'ZOOKEEPER-1315zookeeper_init always reports sessionPasswd=hiddenZOOKEEPER-1317Possible segfault in zookeeper_init.ZOOKEEPER-1319Missing data after restarting+expanding a cluster.ZOOKEEPER-1269Multi deserialization issues.Changes Since ZooKeeper 3.3.0Changes Since ZooKeeper 3.3.0Changes Since ZooKeeper 3.3.0IssueNotesSub-TasksZOOKEEPER-1239add logging/stats to identify fsync stalls.ZOOKEEPER-1208Ephemeral node not removed after the client session is long gone.ZOOKEEPER-784server-side functionality for read-only mode. This is not thoroughly tested.
  Avoid using it in production. This is also at risk of being removed from
  the feature set later.ZOOKEEPER-798Fixup loggraph for FLE changesZOOKEEPER-839deleteRecursive does not belong to the other methodsZOOKEEPER-908Remove code duplication and inconsistent naming in ClientCnxn.Packet creationZOOKEEPER-909Extract NIO specific code from ClientCnxnZOOKEEPER-966Client side for multiZOOKEEPER-967Server side decoding and function dispatchZOOKEEPER-968Database multi-updateZOOKEEPER-1042Generate zookeeper test jar for maven installationZOOKEEPER-1081modify leader/follower code to correctly deal with new leaderZOOKEEPER-1082modify leader election to correctly take into account current epochZOOKEEPER-1150fix for this patch to compile on windows...ZOOKEEPER-1160test timeouts are too smallZOOKEEPER-1201Clean SaslServerCallbackHandler.javaBug FixesZOOKEEPER-1268problems with read only mode, intermittent test failures and ERRORs in the log.ZOOKEEPER-1271testEarlyLeaderAbandonment failing on solaris - clients not retrying connection.ZOOKEEPER-1192Leader.waitForEpochAck() checks waitingForNewEpoch instead of checking electionFinished.ZOOKEEPER-1246Dead code in PrepRequestProcessor catch Exception block.ZOOKEEPER-1264FollowerResyncConcurrencyTest failing intermittently.ZOOKEEPER-1270testEarlyLeaderAbandonment failing intermittently, quorum formed, no serving.ZOOKEEPER-1291AcceptedEpoch not updated at leader before it proposes the epoch to followers.ZOOKEEPER-1282Learner.java not following Zab 1.0 protocol - setCurrentEpoch should be done upon receipt of NEWLEADER
 (before acking it) and not upon receipt of UPTODATE.ZOOKEEPER-335zookeeper servers should commit the new leader txn to their logs.ZOOKEEPER-418Need nifty zookeeper browserZOOKEEPER-603zkpython should do a better job of freeing memory under error conditionsZOOKEEPER-662Too many CLOSE_WAIT socket state on a serverZOOKEEPER-690AsyncTestHammer test fails on hudson.ZOOKEEPER-719Add throttling to BookKeeper clientZOOKEEPER-720Use zookeeper-{version}-sources.jar instead of zookeeper-{version}-src.jar to publish sources in the Maven repositoryZOOKEEPER-722zkServer.sh uses sh's builtin echo on BSD, behaves incorrectly.ZOOKEEPER-731Zookeeper#delete  , #create - async versions miss a verb in the javadocZOOKEEPER-734QuorumPeerTestBase.java and ZooKeeperServerMainTest.java do not handle windows path correctlyZOOKEEPER-735cppunit test testipv6 assumes that the machine is ipv6 enabled.ZOOKEEPER-737some 4 letter words may fail with netcat (nc)ZOOKEEPER-738zookeeper.jute.h fails to compile with -pedanticZOOKEEPER-741root level create on REST proxy failsZOOKEEPER-742Deallocatng None on writesZOOKEEPER-746learner outputs session id to log in dec (should be hex)ZOOKEEPER-749OSGi metadata not included in binary only jarZOOKEEPER-750move maven artifacts into "dist-maven" subdir of the release (package target)ZOOKEEPER-758zkpython segfaults on invalid acl with missing keyZOOKEEPER-763Deadlock on close w/ zkpython / c clientZOOKEEPER-764Observer elected leader due to inconsistent voting viewZOOKEEPER-766forrest recipes docs don't mention the lock/queue recipe implementations available in the releaseZOOKEEPER-769Leader can treat observers as quorum membersZOOKEEPER-772zkpython segfaults when watcher from async get children is invoked.ZOOKEEPER-774Recipes tests are slightly outdated: they do not compile against JUnit 4.8ZOOKEEPER-777setting acl on a non existant node should return no node errorZOOKEEPER-782Incorrect C API documentation for WatchesZOOKEEPER-783committedLog in ZKDatabase is not properly synchronizedZOOKEEPER-787groupId in deployed pom is wrongZOOKEEPER-790Last processed zxid set prematurely while establishing leadershipZOOKEEPER-792zkpython memory leakZOOKEEPER-794Callbacks are not invoked when the client is closedZOOKEEPER-795eventThread isn't shutdown after a connection "session expired" event comingZOOKEEPER-796zkServer.sh should support an external PIDFILE variableZOOKEEPER-800zoo_add_auth returns ZOK if zookeeper handle is in ZOO_CLOSED_STATEZOOKEEPER-804c unit tests failing due to "assertion cptr failed"ZOOKEEPER-813maven install is broken due to incorrect organisationZOOKEEPER-814monitoring scripts are missing apache license headersZOOKEEPER-820update c unit tests to ensure "zombie" java server processes don't cause failureZOOKEEPER-822Leader election taking a long time  to completeZOOKEEPER-831BookKeeper: Throttling improved for readsZOOKEEPER-844handle auth failure in java clientZOOKEEPER-846zookeeper client doesn't shut down cleanly on the close callZOOKEEPER-854BookKeeper does not compile due to changes in the ZooKeeper codeZOOKEEPER-855clientPortBindAddress should be clientPortAddressZOOKEEPER-861Missing the test SSL certificate used for running junit tests.ZOOKEEPER-867ClientTest is failing on hudson - fd cleanupZOOKEEPER-870Zookeeper trunk build broken.ZOOKEEPER-874FileTxnSnapLog.restore does not call listenerZOOKEEPER-880QuorumCnxManager$SendWorker grows without boundsZOOKEEPER-881ZooKeeperServer.loadData loads database twiceZOOKEEPER-882Startup loads last transaction from snapshotZOOKEEPER-884Remove LedgerSequence references from BookKeeper documentation and comments in testsZOOKEEPER-888c-client / zkpython: Double free corruption on node watcherZOOKEEPER-893ZooKeeper high cpu usage when invalid requestsZOOKEEPER-897C Client seg faults during closeZOOKEEPER-898C Client might not cleanup correctly during closeZOOKEEPER-902Fix findbug issue in trunk "Malicious code vulnerability"ZOOKEEPER-904super digest is not actually acting as a full superuserZOOKEEPER-913Version parser fails to parse "3.3.2-dev" from build.xml.ZOOKEEPER-917Leader election selected incorrect leaderZOOKEEPER-919Ephemeral nodes remains in one of ensemble after deliberate SIGKILLZOOKEEPER-921zkPython incorrectly checks for existence of required ACL elementsZOOKEEPER-937test -e not available on solaris /bin/shZOOKEEPER-957zkCleanup.sh doesn't do anythingZOOKEEPER-958Flag to turn off autoconsume in hedwig c++ clientZOOKEEPER-961Watch recovery after disconnection when connection string contains a prefixZOOKEEPER-962leader/follower coherence issue when follower is receiving a DIFFZOOKEEPER-963Make Forrest work with JDK6ZOOKEEPER-965Need a multi-update command to allow multiple znodes to be updated safelyZOOKEEPER-975new peer goes in LEADING state even if ensemble is onlineZOOKEEPER-976ZooKeeper startup script doesn't use JAVA_HOMEZOOKEEPER-981Hang in zookeeper_close() in the multi-threaded C clientZOOKEEPER-983running zkServer.sh start remotely using ssh hangsZOOKEEPER-985Test BookieRecoveryTest fails on trunk.ZOOKEEPER-1006QuorumPeer "Address already in use" -- regression in 3.3.3ZOOKEEPER-1007iarchive leak in C clientZOOKEEPER-1013zkServer.sh usage message should mention all startup optionsZOOKEEPER-1027chroot not transparent in zoo_create()ZOOKEEPER-1028In python bindings, zookeeper.set2() should return a stat dict but instead returns NoneZOOKEEPER-1033c client should install includes into INCDIR/zookeeper, not INCDIR/c-client-srcZOOKEEPER-1034perl bindings should automatically find the zookeeper c-client headersZOOKEEPER-1046Creating a new sequential node results in a ZNODEEXISTS errorZOOKEEPER-1049Session expire/close flooding renders heartbeats to delay significantlyZOOKEEPER-1051SIGPIPE in Zookeeper 0.3.* when send'ing after cluster disconnectionZOOKEEPER-1052Findbugs warning in QuorumPeer.ResponderThread.run()ZOOKEEPER-1055check for duplicate ACLs in addACL() and create()ZOOKEEPER-1058fix typo in opToString for getDataZOOKEEPER-1059stat command isses on non-existing node causes NPEZOOKEEPER-1060QuorumPeer takes a long time to shutdownZOOKEEPER-1061Zookeeper stop fails if start called twiceZOOKEEPER-1063Dubious synchronization in Zookeeper and ClientCnxnSocketNIO classesZOOKEEPER-1068Documentation and default config suggest incorrect location for Zookeeper stateZOOKEEPER-1069Calling shutdown() on a QuorumPeer too quickly can lead to a corrupt logZOOKEEPER-1073address a documentation issue in ZOOKEEPER-1030ZOOKEEPER-1074zkServer.sh is missing nohup/sleep, which are necessary for remote invocationZOOKEEPER-1076some quorum tests are unnecessarily extending QuorumBaseZOOKEEPER-1083Javadoc for WatchedEvent not being generatedZOOKEEPER-1086zookeeper test jar has non mavenised dependency.ZOOKEEPER-1087ForceSync VM arguement not working when set to "no"ZOOKEEPER-1088delQuota does not remove the quota node and subesquent setquota calls for that path will failZOOKEEPER-1090Race condition while taking snapshot can lead to not restoring data tree correctlyZOOKEEPER-1091when the chrootPath of ClientCnxn is not null and the Watches of zooKeeper is not null and the method primeConnection(SelectionKey k) of ClientCnxn Occurred again for some reason ,then the wrong watcher clientPath is sended to serverZOOKEEPER-1097Quota is not correctly rehydrated on snapshot reloadZOOKEEPER-1101Upload zookeeper-test maven artifacts to maven repository.ZOOKEEPER-1108Various bugs in zoo_add_auth in CZOOKEEPER-1109Zookeeper service is down when SyncRequestProcessor meets any exception.ZOOKEEPER-1111JMXEnv uses System.err instead of loggingZOOKEEPER-1119zkServer stop command incorrectly reading comment lines in zoo.cfgZOOKEEPER-1124Multiop submitted to non-leader always fails due to timeoutZOOKEEPER-1136NEW_LEADER should be queued not sent to match the Zab 1.0 protocol on the twikiZOOKEEPER-1138release audit failing for a number of new filesZOOKEEPER-1139jenkins is reporting two warnings, fix theseZOOKEEPER-1140server shutdown is not stopping threadsZOOKEEPER-1141zkpython fails tests under python 2.4ZOOKEEPER-1142incorrect stat outputZOOKEEPER-1144ZooKeeperServer not starting on leader due to a race conditionZOOKEEPER-1145ObserverTest.testObserver fails at particular point after several runs of ant junt.run -DtestcaseZOOKEEPER-1146significant regression in client (c/python) performanceZOOKEEPER-1152Exceptions thrown from handleAuthentication can cause buffer corruption issues in NIOServerZOOKEEPER-1154Data inconsistency when the node(s) with the highest zxid is not present at the time of leader electionZOOKEEPER-1156Log truncation truncating log too much - can cause data lossZOOKEEPER-1165better eclipse support in testsZOOKEEPER-1168ZooKeeper fails to run with IKVMZOOKEEPER-1171fix build for java 7ZOOKEEPER-1174FD leak when network unreachableZOOKEEPER-1181Fix problems with Kerberos TGT renewalZOOKEEPER-1185Send AuthFailed event to client if SASL authentication failsZOOKEEPER-1189For an invalid snapshot file(less than 10bytes size) RandomAccessFile stream is leaking.ZOOKEEPER-1190ant package is not including many of the bin scripts in the package (zkServer.sh for example)ZOOKEEPER-1195SASL authorizedID being incorrectly set: should use getHostName() rather than getServiceName()ZOOKEEPER-1203Zookeeper systest is missing Junit ClassesZOOKEEPER-1206Sequential node creation does not use always use digits in node name given certain Locales.ZOOKEEPER-1212zkServer.sh stop action is not conformat with LSB para 20.2 Init Script ActionsZOOKEEPER-1237ERRORs being logged when queued responses are sent after socket has closed.ImprovementsZOOKEEPER-494zookeeper should install include headers in /usr/local/include/zookeeperZOOKEEPER-500Async methods shouldnt throw exceptionsZOOKEEPER-631zkpython's C code could do with a style clean-upZOOKEEPER-636configure.ac has instructions which override the contents of CFLAGS and CXXFLAGS.ZOOKEEPER-724Improve junit test integration - log harness informationZOOKEEPER-733use netty to handle client connectionsZOOKEEPER-765Add python example scriptZOOKEEPER-773Log visualisationZOOKEEPER-788Add server id to message logsZOOKEEPER-789Improve FLE log messagesZOOKEEPER-797c client source with AI_ADDRCONFIG cannot be compiled with early glibcZOOKEEPER-809Improved REST InterfaceZOOKEEPER-821Add ZooKeeper version information to zkpythonZOOKEEPER-853Make zookeeper.is_unrecoverable return True or False and not an integerZOOKEEPER-862Hedwig created ledgers with hardcoded Bookkeeper ensemble and quorum size.  Make these a server config parameter instead.ZOOKEEPER-864Hedwig C++ client improvementsZOOKEEPER-891Allow non-numeric version stringsZOOKEEPER-905enhance zkServer.sh for easier zookeeper automation-izingZOOKEEPER-926Fork Hadoop common's test-patch.sh and modify for ZookeeperZOOKEEPER-977passing null for path_buffer in zoo_createZOOKEEPER-980allow configuration parameters for log4j.propertiesZOOKEEPER-993Code improvementsZOOKEEPER-997ZkClient ignores command if there are any space in front of itZOOKEEPER-1018The connection permutation in get_addrs uses a weak and inefficient shuffleZOOKEEPER-1025zkCli is overly sensitive to to spaces.ZOOKEEPER-1030Increase default for maxClientCnxnsZOOKEEPER-1094Small improvements to LeaderElection and Vote classesZOOKEEPER-1095Simple leader election recipeZOOKEEPER-1103In QuorumTest, use the same "for ( .. try { break } catch { } )" pattern in testFollowersStartAfterLeaders as in testSessionMove.ZOOKEEPER-1104CLONE - In QuorumTest, use the same "for ( .. try { break } catch { } )" pattern in testFollowersStartAfterLeaders as in testSessionMove.ZOOKEEPER-1143quorum send & recv workers are missing thread namesZOOKEEPER-1153Deprecate AuthFLE and LEZOOKEEPER-1166Please add a few svn:ignore propertiesZOOKEEPER-1169Fix compiler (eclipse) warnings in (generated) jute codeZOOKEEPER-1243New 4lw for short simple monitoring ldckFeaturesZOOKEEPER-464Need procedure to garbage collect ledgersZOOKEEPER-465Ledger size in bytesZOOKEEPER-546add "diskless" ensemble supportZOOKEEPER-712Bookie recoveryZOOKEEPER-729Recursively delete a znode  - zkCli.sh rmr /nodeZOOKEEPER-744Add monitoring four-letter wordZOOKEEPER-747Add C# generation to JuteZOOKEEPER-775A large scale pub/sub systemZOOKEEPER-799Add tools and recipes for monitoring as a contribZOOKEEPER-808Web-based Administrative InterfaceZOOKEEPER-859Native Windows version of C clientZOOKEEPER-938Support Kerberos authentication of clients.ZOOKEEPER-992MT Native Version of Windows C ClientZOOKEEPER-999Create an package integration projectZOOKEEPER-1012support distinct JVMFLAGS for zookeeper server in zkServer.sh and zookeeper client in zkCli.shZOOKEEPER-1020Implement function in C client to determine which host you're currently connected to.ZOOKEEPER-1107automating log and snapshot cleaningTasksZOOKEEPER-754numerous misspellings "succesfully"ZOOKEEPER-1149users cannot migrate from 3.4->3.3->3.4 server code against a single datadirTestsZOOKEEPER-239ZooKeeper System TestsCopyright ©
         2008The Apache Software Foundation.