URL: https://cassandra.apache.org/_/development/how_to_commit.html

Get StartedCassandra BasicsQuickstartEcosystemDocumentationCommunityWelcomeDiscussionsGovernanceContributeMeet the CommunityCatalyst ProgramEventsLearnCassandra 5.0Case StudiesResourcesBlogDownload NowHow-to CommitIf you are a committer, feel free to pick any process that works for you
- so long as you are planning to commit the work yourself.Patch based ContributionHere is how committing and merging will usually look for merging and
pushing for tickets that follow the convention (if patch-based):Hypothetical CASSANDRA-12345 ticket is a cassandra-4.0 based bug fix
that requires different code for cassandra-4.0, cassandra-4.1, and
trunk. Contributor Jackie supplied a patch for the root branch
(12345-4.0.patch), and patches for the remaining branches
(12345-4.1.patch, 12345-5.0.patch, 12345-trunk.patch).On cassandra-4.0git am -3 12345-4.0.patch(any problem b/c of CHANGES.txt not
merging anymore, fix it in place)ant realclean && ant jar(rebuild to make sure code
compiles)git commit --amend(Notice this will squash the 4.0 applied
patch into the forward merge commit)On cassandra-4.1git merge cassandra-4.0 -s ours --loggit apply -3 12345-4.1.patch(any issue with CHANGES.txt : fix
andgit add CHANGES.txt)ant realclean && ant jar(rebuild to make sure code
compiles)git commit --amend(Notice this will squash the 4.1 applied
patch into the forward merge commit)On cassandra-5.0git merge cassandra-4.1 -s ours --loggit apply -3 12345-5.0.patch(any issue with CHANGES.txt : fix
andgit add CHANGES.txt)ant realclean && ant jar check(rebuild to make sure code
compiles)git commit --amend(Notice this will squash the 4.1 applied
patch into the forward merge commit)On trunkgit merge cassandra-5.0 -s ours --loggit apply -3 12345-trunk.patch(any issue with CHANGES.txt : fix
andgit add CHANGES.txt)ant realclean && ant jar check(rebuild to make sure code
compiles)git commit --amend(Notice this will squash the trunk applied
patch into the forward merge commit)On any branchgit push origin cassandra-4.0 cassandra-4.1 cassandra-5.0 trunk --atomic -n(dryrun check)git push origin cassandra-4.0 cassandra-4.1 cassandra-5.0 trunk --atomicGit branch based ContributionSame scenario, but a branch-based contribution:On cassandra-4.0git cherry-pick <sha-of-4.0-commit>(any problem b/c of
CHANGES.txt not merging anymore, fix it in place)ant realclean && ant jar(rebuild to make sure code
compiles)On cassandra-4.1git merge cassandra-4.0 -s ours --loggit format-patch -1 <sha-of-4.1-commit>(alternative to
format-patch and apply ischerry-pick -n)git apply -3 <sha-of-4.1-commit>.patch(any issue with
CHANGES.txt : fix andgit add CHANGES.txt)ant realclean && ant jar(rebuild to make sure code
compiles)git commit --amend(Notice this will squash the 4.1 applied
patch into the forward merge commit)On cassandra-5.0git merge cassandra-4.1 -s ours --loggit format-patch -1 <sha-of-5.0-commit>(alternative to
format-patch and apply ischerry-pick -n)git apply -3 <sha-of-5.0-commit>.patch(any issue with
CHANGES.txt : fix andgit add CHANGES.txt)ant realclean && ant jar check(rebuild to make sure code
compiles)git commit --amend(Notice this will squash the 5.0 applied
patch into the forward merge commit)On trunkgit merge cassandra-5.0 -s ours --loggit format-patch -1 <sha-of-trunk-commit>(alternative to
format-patch and apply ischerry-pick -n)git apply -3 <sha-of-trunk-commit>.patch(any issue with
CHANGES.txt : fix andgit add CHANGES.txt)ant realclean && ant jar check(rebuild to make sure code
compiles)git commit --amend(Notice this will squash the trunk applied
patch into the forward merge commit)On any branchgit push origin cassandra-4.0 cassandra-4.1 cassandra-5.0 trunk --atomic -n(dryrun check)git push origin cassandra-4.0 cassandra-4.1 cassandra-5.0 trunk --atomicContributions only for release branchesIf the patch is for an older branch, and doesn’t impact later branches
(such as trunk), we still need to merge up.On cassandra-4.0git cherry-pick <sha-of-4.0-commit>(any problem b/c of
CHANGES.txt not merging anymore, fix it in place)ant realclean && ant jar(rebuild to make sure code
compiles)On cassandra-4.1git merge cassandra-4.0 -s ours --logant realclean && ant jar(rebuild to make sure code
compiles)On cassandra-5.0git merge cassandra-4.1 -s ours --logant realclean && ant jar check(rebuild to make sure code
compiles)On trunkgit merge cassandra-4.1 -s ours --logant realclean && ant jar check(rebuild to make sure code
compiles)On any branchgit push origin cassandra-4.0 cassandra-4.1 trunk --atomic -n(dryrun check)git push origin cassandra-4.0 cassandra-4.1 trunk --atomicTipsTipA template for commit messages:<One sentence description, usually Jira title or CHANGES.txt summary>
<Optional lengthier description>

patch by <Authors>; reviewed by <Reviewers> for CASSANDRA-#####


Co-authored-by: Name1 <email1>
Co-authored-by: Name2 <email2>TipNotes on git flags:-3flag to am and apply will instruct git to
perform a 3-way merge for you. If a conflict is detected, you can either
resolve it manually or invoke git mergetool - for both am and apply.--atomicflag to git push does the obvious thing: pushes all or
nothing. Without the flag, the command is equivalent to running git push
once per each branch. This is nifty in case a race condition happens -
you wonât push half the branches, blocking other committersâ progress
while you are resolving the issue.TipThe fastest way to get a patch from someoneâs commit in a branch on GH -
if you donât have their repo in remotes - is to append .patch to the
commit url, e.g. curl -Ogithub.com/apache/cassandra/commit/7374e9b5ab08c1f1e612bf72293ea14c959b0c3c.patchTipgit cherry-pick -n <sha-of-X.X-commit>can be used in place of thegit format-patch -1 <sha-of-X.X-commit> ; git apply -3 <sha-of-X.X-commit>.patchsteps.Get started with Cassandra, fast.Quickstart GuideApache Cassandrapowers mission-critical deployments with improved performance and unparalleled levels of scale in the cloud.HomeCassandra BasicsQuickstartEcosystemDocumentationCommunityCase StudiesResourcesBlogFoundationEventsLicenseThanksSecurityPrivacySponsorshipÂ© 2009-The Apache Software Foundationunder the terms of the Apache License 2.0.  Apache, the Apache feather logo, Apache Cassandra, Cassandra, and the Cassandra logo, are either registered trademarks or trademarks of The Apache Software Foundation.